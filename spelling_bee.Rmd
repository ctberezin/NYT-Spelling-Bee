---
title: "NYT Spelling Bee Solver"
author: "C-T Berezin"
date: "11/9/21"
output:
  pdf_document: default
  html_document: default
---

```{r}
library(tidyverse)
```

```{r word_list}
#all english words
word_list <- read_csv(paste0("https://raw.githubusercontent.com/dwyl",
                             "/english-words/master/words_alpha.txt"),
                           col_names = "word")
word_list <- word_list %>%
  mutate(length = str_length(word)) %>% 
  filter(length >= 4)
```

```{r letters}
center_letter <- "c"
circle_letters <- c("k",
                    "j",
                    "a",
                    "p",
                    "l",
                    "e")
all_letters <- c(center_letter, circle_letters)
```

```{r solve}
solving <- word_list %>%
  #filter to words with center letter
  filter(str_detect(word, center_letter) == TRUE) %>% 
  #break work into letters
  mutate(lets = str_split(word, pattern=""))

solving <- solving %>%
  #check the word's letters against the puzzle's letters
  mutate(match = map(lets, ~.x %in% all_letters, lets=.x)) %>%
 #count number of matching letters
  mutate(matches = map(match, sum)) %>% 
  unnest(matches)

answers <- solving %>%
  #keep words that only use the puzzle's letters
  filter(matches == length) %>% 
  arrange(desc(length))

answers$word
```

Work in Progress from here down


```{r}
pangrams <- answers %>%
  filter(length >= 7) %>% 
  #check the puzzle's letters against the word's letters
  mutate(pangram = map(lets, ~.x %in% all_letters, lets=.x)) %>%
 #count number of matching letters
  mutate(p_matches = map(pangram, sum)) %>% 
  unnest(p_matches)


pangrams %>%
  #keep words that only use the puzzle's letters
  filter(p_matches >= length) %>% 
  arrange(desc(length)) %>% 
  pull(word)
```